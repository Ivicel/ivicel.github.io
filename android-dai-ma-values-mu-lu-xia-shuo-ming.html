<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


  <title>Android 代码 values 目录下说明</title>


  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="referrer" content="origin" />
  <meta name="generator" content="Pelican" />
  <link href="./" rel="canonical" />

  <!-- Feed -->

  <link href="./theme/css/style.css" type="text/css" rel="stylesheet" />

  <!-- Code highlight color scheme -->
      <link href="./theme/css/code_blocks/github.css" rel="stylesheet">

    <!-- CSS specified by the user -->


    <link href="./assets/css/prism.css" type="text/css" rel="stylesheet" />


    <link href="./assets/css/base.css" type="text/css" rel="stylesheet" />


    <link href="./assets/css/base-control.css" type="text/css" rel="stylesheet" />


    <link href="./assets/css/github.css" type="text/css" rel="stylesheet" />


    <link href="./assets/css/codemirror.css" type="text/css" rel="stylesheet" />


    <link href="./assets/css/ivicel.css" type="text/css" rel="stylesheet" />

  <!-- Custom fonts -->
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,300' rel='stylesheet' type='text/css' />
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css" />

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->


  <link href="./android-dai-ma-values-mu-lu-xia-shuo-ming.html" rel="canonical" />

    <meta name="description" content="对于 Android 源代码目录下 values/* 文件 , 其所有的 xml 文件根标签都是 resource. aapt 会把这个目录下的文件全部 build 出 java 可引用的整型数值 , 这样的便可以通过 R.[type].[name] 来引用到 ....">

    <meta name="author" content="ivicel">

    <meta name="tags" content="resources">
    <meta name="tags" content="android资源文件">
    <meta name="tags" content="attrs">
    <meta name="tags" content="style">
    <meta name="tags" content="styleable">




<!-- Open Graph -->
<meta property="og:site_name" content="Ambertime"/>
<meta property="og:title" content="Android 代码 values 目录下说明"/>
<meta property="og:description" content="对于 Android 源代码目录下 values/* 文件 , 其所有的 xml 文件根标签都是 resource. aapt 会把这个目录下的文件全部 build 出 java 可引用的整型数值 , 这样的便可以通过 R.[type].[name] 来引用到 ...."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="./android-dai-ma-values-mu-lu-xia-shuo-ming.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2018-04-22 00:00:00+08:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="./author/ivicel.html">
<meta property="article:section" content="Android"/>
<meta property="article:tag" content="resources"/>
<meta property="article:tag" content="android资源文件"/>
<meta property="article:tag" content="attrs"/>
<meta property="article:tag" content="style"/>
<meta property="article:tag" content="styleable"/>
<meta property="og:image" content="./theme/images/post-bg.jpg">

<!-- Twitter Card -->

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "Android 代码 values 目录下说明",
  "headline": "Android 代码 values 目录下说明",
  "datePublished": "2018-04-22 00:00:00+08:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "ivicel",
    "url": "./author/ivicel.html"
  },
  "image": "./theme/images/post-bg.jpg",
  "url": "./android-dai-ma-values-mu-lu-xia-shuo-ming.html",
  "description": "对于 Android 源代码目录下 values/* 文件 , 其所有的 xml 文件根标签都是 resource. aapt 会把这个目录下的文件全部 build 出 java 可引用的整型数值 , 这样的便可以通过 R.[type].[name] 来引用到 ...."
}
</script>
</head>
<!-- TODO : Body class -->
<body class="home-template">

<nav id="menu">
  <a class="close-button">Close</a>
  <div class="nav-wrapper">
    <p class="nav-label">Menu</p>
    <ul>


    </ul>
  </div>
</nav>
    <!-- Progressbar -->
    <div class="progress-container">
        <span class="progress-bar"></span>
    </div>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header id="blog-header" >
      <div class="inner">
        <nav id="navigation">
            <span id="home-button" class="nav-button">
                <a class="home-button" href="./" title="Home"><i class="ic ic-arrow-left"></i> Home</a>
            </span>
          <span id="menu-button" class="nav-button">
            <a class="menu-button"><i class="ic ic-menu"></i> Menu</a>
          </span>
        </nav>
        <h1 class="post-title">Android 代码 values 目录下说明</h1>
        <!-- TODO : Proper class for headline -->
        <span class="post-meta">
                <a href="./author/ivicel.html">Ivicel</a>
            | <time datetime="Sun 22 April 2018">Sun 22 April 2018</time>
        </span>
        <!-- TODO : Modified check -->
      </div>
    </header>

  <section id="wrapper">
    <a class="hidden-close"></a>

    <!-- Post content -->
    <main class="content" role="main">
        <article class="post">
        <div class="inner">
            <section class="post-content">
                <p> 对于 Android 源代码目录下 <code>values/*</code> 文件 , 其所有的 xml 文件根标签都是 <code>resource</code>. aapt 会把这个目录下的文件全部 build  出 java 可引用的整型数值 , 这样的便可以通过 <code>R.[type].[name]</code> 来引用到 . 其类型只和标签名有关 , 对放在哪个文件无关 . 一般我们会把这些个类型不同的分别放在不 <code>values/*</code> 下不同的文件里只是为了方便编码时自己查看 . 一般有以下几种类型 :</p>
<h3 id="1-style">1. style 主题文件 </h3>
<p> 主题文件一般有两种 , 一个是 <code>style</code>, 一个是属性 <code>attr</code></p>
<ol>
<li>style 标签是主题文件 . 一般我们会从系统中的主题 , 或者是某个 view 来继承 . 或者也可以自己单独写而不继承 . <strong>style 标签里 item 的 name 值需要已经是有定义过了的 , 可以是系统预先定义好的 , 或者是自己再使用 attr 定义的 .</strong> 使用 <code>R.style.[name]</code> 来引用 . 在 xml 文件中使用 <code>style=@style/[name]</code> . 一般放在 <code>values/styles.xml</code></li>
</ol>
<pre class="highlight"><code class="language-xml linenums">&lt;!-- 自定义主题并继承 support 包里的主题 
 继承的主题可以在 3 个地方使用 , 全局 application, 单个 activity, 某个 view  
 --&gt;
&lt;style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar"&gt;
    &lt;!-- 覆写 support 主题里的值 --&gt;
    &lt;item name="colorPrimary"&gt;@color/colorPrimary&lt;/item&gt;
    &lt;!-- 覆写系统主题里的值 , 这其实是一个 framework 里的内部 attr --&gt;
    &lt;item name="android:textViewStyle"&gt;@style/BlueTextStyle&lt;/item&gt;
    &lt;!-- 覆写系统主题里的值 --&gt;
    &lt;item name="android:textSize"&gt;18sp&lt;/item&gt;
    &lt;!-- 自定义的属性值 --&gt;
    &lt;item name="source_name"&gt;sources&lt;/item&gt;
&lt;/style&gt;
&lt;attr name="source_name" format="string"/&gt; 
&lt;!-- 自定义的 style, 可以在 layout 中的 view 直接引用 style=@style/BlueTextStyle --&gt;
&lt;style name="BlueTextStyle"&gt;
    &lt;item name="android:textColor"&gt;@android:color/holo_blue_light&lt;/item&gt;
&lt;/style&gt;</code></pre>

<ol>
<li> 使用 attr 的原因是为自定义 view 添加属性 , 另外是方便更改属性的值 . 有两种定义方式 . </li>
</ol>
<p> 一种是直接在 <code>resources</code> 下定义 </p>
<pre class="highlight"><code class="language-xml linenums">&lt;resources&gt;
    &lt;attr name="one" format="reference"/&gt;
&lt;/resources&gt;</code></pre>

<p> 一种是在外面包一层 <code>declare-styleable</code> 标签 . </p>
<pre class="highlight"><code class="language-xml linenums">&lt;!-- 引用整组为 R.styleable.MyAttrs, 单个为 R.styleable.MyAttrs_other_one --&gt;
&lt;resources&gt;
    &lt;declare-styleable name="MyAttrs"&gt;
        &lt;!-- 这个是 attr 的定义 --&gt;
     &lt;attr name="other_one" format="reference"/&gt;
        &lt;!-- 这个是对已经定义的 attr 引用 , 没有 format 值 --&gt;
        &lt;attr name="one"/&gt;
 &lt;/declare-styleable&gt;
&lt;/resources&gt;</code></pre>

<p> 使用 <code>declare-styleable</code> 主要有两点 </p>
<ul>
<li> 它提供了一个数组的引用 <code>R.styleable.[styleable-name]</code> 引用 ( 组里成员引用为 <code>R.styleable.[styleable-name]_[attr-name]</code> 注意组名和成员名是用下划线 _ 连接 ) 由于在使用 <code>Theme#obtainStyledAttributes()</code> 的参数 , 如果我们直接引用 <code>R.attr.one</code> 也是要组成一个数组的 </li>
<li> 如果我们有不同的自定义的 view, 比如 MyTextView, MyOtherTextView, 这样使用分组便于管理 </li>
</ul>
<p>#### attr 属性的 format 取值 </p>
<blockquote>
<p> 当 attr 中没有 format 值时 , 是对已经定义了的 attr 的引用 </p>
</blockquote>
<ol>
<li>
<p><code>reference</code> 引用 . 某个资源 ID.</p>
<pre class="highlight"><code class="language-xml linenums">&lt;attr name="my_bg" format="reference"/&gt;

&lt;TextView
  app:my_bg="@drawable/bg"/&gt;</code></pre>

</li>
<li>
<p><code>color</code> 颜色值 .</p>
</li>
<li>
<p><code>boolean</code> 布尔值 </p>
</li>
<li>
<p><code>dimension</code> 尺寸值 </p>
</li>
<li>
<p><code>float</code> 浮点数 </p>
</li>
<li>
<p><code>integer</code> 整型 </p>
</li>
<li>
<p><code>string</code> 字符串 </p>
</li>
<li>
<p><code>fraction</code> 百分数 . 使用时类似系统 <code>android:pivotX="200%"</code></p>
</li>
<li>
<p><code>enum</code> 枚举类型 . 使用时只能取一个惟一值 . </p>
<pre class="highlight"><code class="language-xml linenums">&lt;declare-styleable name="MyDirection"&gt; 
    &lt;attr name="orientation"&gt; 
        &lt;enum name="horizontal" value="0" /&gt; 
        &lt;enum name="vertical" value="1" /&gt; 
    &lt;/attr&gt;
&lt;/declare-styleable&gt;</code></pre>

</li>
<li>
<p><code>flag</code> 标志位 , 使用时通过 <code>|</code> 竖线来设置单个或多个值 , 如 <code>stateOne | stateTwo</code> 这样 </p>
<pre class="highlight"><code class="language-xml linenums">&lt;declare-styleable name="MyState"&gt; 
    &lt;attr name="windowSoftInputMode"&gt; 
        &lt;flag name="stateOne" value="0x01" /&gt; 
        &lt;flag name="stateTwo" value="0x10" /&gt; 
    &lt;/attr&gt;
&lt;/declare-styleable&gt;

</code></pre>

</li>
<li>
<p> 混合类型 , 比如支持 <code>string|reference</code> 这种 , 使用 <code>|</code> 竖线分隔开 </p>
</li>
</ol>
<h3 id="2">2. 其他资源文件 </h3>
<ol>
<li><a href="https://developer.android.com/guide/topics/resources/more-resources.html#Bool">Bool</a> 布尔型 , 只有 (true/false) 两个值 </li>
</ol>
<p> 使用 <code>R.bool.[name]</code>, <code>@bool/[name]</code> 来引用 . 一般存放在 <code>values/bools.xml</code>. </p>
<p><pre class="highlight"><code class="language-xml linenums">&lt;resources&gt;
    &lt;bool name="screen_small"&gt;true&lt;/bool&gt;
&lt;/resources&gt;</code></pre>
2. <a href="https://developer.android.com/guide/topics/resources/more-resources.html#Color">Color</a> 颜色 , 一个 16 进制的值 (#<em>RGB</em>, #<em>ARGB</em>, #<em>RRGGBB</em>, #<em>AARRGGBB</em>). 跟 <code>res/colors</code> 下的区别是 , 这里的值一般只存储单一的颜色值 . 使用 <code>R.color.[name]</code>, <code>@color/[name]</code> 来引用 , 存放在 <code>values/colors.xml</code></p>
<p><pre class="highlight"><code class="language-xml linenums">&lt;resources&gt;
   &lt;color name="opaque_red"&gt;#f00&lt;/color&gt;
   &lt;color name="translucent_red"&gt;#80ff0000&lt;/color&gt;
&lt;/resources&gt;</code></pre>
3. <a href="https://developer.android.com/guide/topics/resources/more-resources.html#Dimension">Dimension</a> 长度尺寸 , 有 dp, sp, pt, px, mm, in 单位 . 最主要用到的是 <code>dp</code> 和 <code>sp</code>. <code>dp</code> 是一种与设备 DPI 无关的单位 , 换算公式为 <code>px = dp * (dpi / 160)</code>. 一共有 <code>ldpi(120)</code>, <code>mdpi(160)</code>, <code>hdpi(240)</code>, <code>xhdpi(320)</code>, <code>xxhdpi(480)</code>, <code>xxxhdpi(640)</code>, <code>nodpi</code>, <code>tvdpi</code>. 通过 <code>DisplayMetrics#densityDpi</code> 来获取该设备的 dpi, <code>DisplayMetrics.density</code> 来获取比值 , 即 *<em> 设备 dpi / 基准 dpi *</em>(<code>DisplayMetrics.densityDpi / 160</code>). 使用 <code>R.dimen.[name]</code>, <code>@dimen/[name]</code> 来引用 </p>
<blockquote>
<p> 注意 : Android 只有以上几种 dpi 比值 , 当设备 dpi 和上设定的不完全相等时 , 会取近似值 . 比如 165 取得 160</p>
</blockquote>
<pre class="highlight"><code class="language-xml linenums">&lt;resources&gt;
    &lt;dimen name="textview_height"&gt;25dp&lt;/dimen&gt;
    &lt;dimen name="font_size"&gt;16sp&lt;/dimen&gt;
&lt;/resources&gt;</code></pre>

<ol>
<li><a href="https://developer.android.com/guide/topics/resources/more-resources.html#Id">ID</a> 独一无二的 ID 值 . 一般我们会在 layout 文件中直接用 <code>@+id/id_name</code> 来建立 , 不过 , 当我们有许多地方需要用到这个 id 时 , 单独建立文件 <code>values/ids.xml</code> 来设置这个 id, 然后在需要的地方引用就可 . 特别是 <code>ConstraintLayout</code> 这个需要前后引用 id 来设定 view 的位置时 , 就减少了工作量 , 不必总使用 <code>@+id/id_name</code> 来保证 id 一定存在了 .  通过 <code>R.id.[name]</code>, <code>@id/[name]</code>  来引用 . 存放在 <code>values/ids.xml</code></li>
</ol>
<pre class="highlight"><code class="language-xml linenums">&lt;resources&gt;
    &lt;item type="id" name="button_ok" /&gt;
&lt;/resources&gt;

&lt;!-- layout 中引用 --&gt;
&lt;Button android:id="@id/button_ok"/&gt;</code></pre>

<ol>
<li><a href="https://developer.android.com/guide/topics/resources/more-resources.html#Integer">Integer</a> 整数值 , 通过 <code>R.integer.[name]</code>, <code>@integer/[name]</code> 来引用 . 存放在 <code>values/integers.xml</code></li>
</ol>
<pre class="highlight"><code class="language-xml linenums">&lt;resources&gt;
    &lt;integer name="max_speed"&gt;75&lt;/integer&gt;
&lt;/resources&gt;</code></pre>

<ol>
<li><a href="https://developer.android.com/guide/topics/resources/more-resources.html#IntegerArray">Integer Array</a> 整型数值 , 通赤 <code>R.array.[name]</code> 来引用 . 使用 java 来解析 . <code>getResources().getInArray(R.array.bits)</code>. 存放在 <code>values/integers.xml</code></li>
</ol>
<pre class="highlight"><code class="language-xml linenums">&lt;resources&gt;
    &lt;integer-array name="bits"&gt;
        &lt;item&gt;4&lt;/item&gt;
        &lt;item&gt;8&lt;/item&gt;
        &lt;item&gt;16&lt;/item&gt;
        &lt;item&gt;32&lt;/item&gt;
    &lt;/integer-array&gt;
&lt;/resources&gt;</code></pre>

<ol>
<li><a href="https://developer.android.com/guide/topics/resources/more-resources.html#TypedArray">Typed Array</a> 混合型数组 , 可以引用其他的资源 , 数组里可以是引用同一类型的值 , 也可以是不同的类型 , 当引用不同类型时 , 在解析的时候就有注意判断类型值 . 使用 <code>R.array.[name]</code> 引用 , 然后有 Java 代码中使用 <code>obtainTypedArray()</code> 来解析具体的值 . 存放在 <code>values/arrays.xml</code></li>
</ol>
<pre class="highlight"><code class="language-xml linenums">&lt;resources&gt;
    &lt;array name="icons"&gt;
        &lt;item&gt;@drawable/home&lt;/item&gt;
        &lt;item&gt;@drawable/settings&lt;/item&gt;
        &lt;item&gt;@drawable/logout&lt;/item&gt;
    &lt;/array&gt;
&lt;/resources&gt;</code></pre>

<p>java 解析代码示例 </p>
<pre class="highlight"><code class="language-java linenums">TypedArray icons = getResources().obtainTypedArray(R.array.icons);
Drawable drawable = icons.getDrawable(0);</code></pre>

<ol>
<li>
<p><a href="https://developer.android.com/guide/topics/resources/string-resource.html">String</a> 字符串 . 使用 <code>R.string.[name]</code>, <code>@string/[name]</code> 引用 . 存放在 <code>values/strings.xml</code></p>
</li>
<li>
<p><a href="https://developer.android.com/guide/topics/resources/string-resource.html">String Array</a> 字符串数组 . 使用 <code>R.array.[name]</code>, <code>@string/name</code> 引用 . 放在 <code>values/strings.xml</code></p>
</li>
</ol>
<pre class="highlight"><code class="language-Xml linenums">&lt;resources&gt;
    &lt;string-array name="planets_array"&gt;
        &lt;item&gt;Mercury&lt;/item&gt;
        &lt;item&gt;Venus&lt;/item&gt;
        &lt;item&gt;Earth&lt;/item&gt;
        &lt;item&gt;Mars&lt;/item&gt;
    &lt;/string-array&gt;
&lt;/resources&gt;</code></pre>

<ol>
<li>
<p><a href="https://developer.android.com/guide/topics/resources/string-resource.html">String Plurals</a> 英文中的单复数形式 </p>
<pre class="highlight"><code class="language-xml linenums">&lt;resources&gt;
    &lt;plurals name="numberOfSongsAvailable"&gt;
        &lt;item quantity="one"&gt;Znaleziono %d piosenkę.&lt;/item&gt;
        &lt;item quantity="few"&gt;Znaleziono %d piosenki.&lt;/item&gt;
        &lt;item quantity="other"&gt;Znaleziono %d piosenek.&lt;/item&gt;
    &lt;/plurals&gt;
&lt;/resources&gt;</code></pre>

<p>​</p>
</li>
</ol>
            </section>

            <section class="post-info">
                <div class="post-share">
                    <a class="twitter" href="https://twitter.com/share?text=Android 代码 values 目录下说明&amp;url=./android-dai-ma-values-mu-lu-xia-shuo-ming.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <i class="ic ic-twitter"></i><span class="hidden">Twitter</span>
                    </a>
                    <a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=./android-dai-ma-values-mu-lu-xia-shuo-ming.html" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <i class="ic ic-facebook"></i><span class="hidden">Facebook</span>
                    </a>
                    <a class="googleplus" href="https://plus.google.com/share?url=./android-dai-ma-values-mu-lu-xia-shuo-ming.html" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <i class="ic ic-googleplus"></i><span class="hidden">Google+</span>
                    </a>
                    <div class="clear"></div>
                </div>

                <aside class="post-tags">
<a href="./tag/resources.html">resources</a><a href="./tag/androidzi-yuan-wen-jian.html">android资源文件</a><a href="./tag/attrs.html">attrs</a><a href="./tag/style.html">style</a><a href="./tag/styleable.html">styleable</a>                </aside>

                <div class="clear"></div>


                </section>


                <aside class="post-nav">
                    <div class="clear"></div>
                </aside>

            </div>
        </article>
    </main>
      <!-- TODO : Body class -->
    <div id="body-class" style="display: none;" class=""></div>

    <footer id="footer">
      <div class="inner">
        <section class="credits">


          <span class="credits-theme">Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a></span>
          <span class="credits-software">Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a></span>
        </section>
      </div>
    </footer>
  </section>

  <script type="text/javascript" src="./theme/js/script.js"></script>

    <!-- Script specified by the user -->
    <script type="text/javascript"  src="./assets/js/prism.js"></script>
</body>
</html>