<!DOCTYPE html>
<html lang="zh" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Android 中自定义ViewPager, 添加页面指示器 - Amber time</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="./android-zhong-zi-ding-yi-viewpager-tian-jia-ye-mian-zhi-shi-qi.html">

        <meta name="author" content="ivicel" />
        <meta name="keywords" content="android,viewpager,页面指示器" />
        <meta name="description" content="在页面滑动时会回调ViewPager.OnPageChangeListener接口里的方法. 用ViewPage.addOnPageChangeListener添加和ViewPage.removeOnPageChangeListener删除监听回调方法. 如果不想实现所有方法, ViewPager内有个空的类SimpleOnPageChangeListener实现了这个接口, 继承这个类便可. 注意可以多次调用addOnPageChangeListener方法添加多个回调, ViewPager按添加顺序进行调用, 所以在不需要回调时, 及时的使用removeOnPageChangeListener来删除回调方法. 另外还需要注意的是ViewPager.getCurrentItem返回值和OnPageSelected参数是一样的, 即是成功滑动后的目标页面索引, 无论当前页面是否还在滑动中 在滑动的时候会调用OnPageScrolled(int position, float positionOffset, int positionOffsetPixels) 参数position指的是在滑动时当前显示页面的左边页面的位置, 具体来说是 …" />

        <meta property="og:site_name" content="Amber time" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Android 中自定义ViewPager, 添加页面指示器"/>
        <meta property="og:url" content="./android-zhong-zi-ding-yi-viewpager-tian-jia-ye-mian-zhi-shi-qi.html"/>
        <meta property="og:description" content="在页面滑动时会回调ViewPager.OnPageChangeListener接口里的方法. 用ViewPage.addOnPageChangeListener添加和ViewPage.removeOnPageChangeListener删除监听回调方法. 如果不想实现所有方法, ViewPager内有个空的类SimpleOnPageChangeListener实现了这个接口, 继承这个类便可. 注意可以多次调用addOnPageChangeListener方法添加多个回调, ViewPager按添加顺序进行调用, 所以在不需要回调时, 及时的使用removeOnPageChangeListener来删除回调方法. 另外还需要注意的是ViewPager.getCurrentItem返回值和OnPageSelected参数是一样的, 即是成功滑动后的目标页面索引, 无论当前页面是否还在滑动中 在滑动的时候会调用OnPageScrolled(int position, float positionOffset, int positionOffsetPixels) 参数position指的是在滑动时当前显示页面的左边页面的位置, 具体来说是 …"/>
        <meta property="article:published_time" content="2018-02-22" />
            <meta property="article:section" content="Android" />
            <meta property="article:tag" content="android" />
            <meta property="article:tag" content="viewpager" />
            <meta property="article:tag" content="页面指示器" />
            <meta property="article:author" content="ivicel" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="./theme/css/bootstrap.min.css" type="text/css"/>
    <link href="./theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="./theme/css/pygments/default.css" rel="stylesheet">
    <link rel="stylesheet" href="./theme/css/style.css" type="text/css"/>





</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="./" class="navbar-brand">
Amber time            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li class="active">
                            <a href="./category/android.html">Android</a>
                        </li>
                        <li >
                            <a href="./category/c-language.html">C language</a>
                        </li>
                        <li >
                            <a href="./category/data-structure-algorithms.html">Data structure algorithms</a>
                        </li>
                        <li >
                            <a href="./category/database.html">Database</a>
                        </li>
                        <li >
                            <a href="./category/java.html">Java</a>
                        </li>
                        <li >
                            <a href="./category/javascript.html">Javascript</a>
                        </li>
                        <li >
                            <a href="./category/python.html">Python</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="./android-zhong-zi-ding-yi-viewpager-tian-jia-ye-mian-zhi-shi-qi.html"
                       rel="bookmark"
                       title="Permalink to Android 中自定义ViewPager, 添加页面指示器">
                        Android 中自定义ViewPager, 添加页面指示器
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2018-02-22T00:00:00+08:00"> Thu 22 February 2018</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="./tag/android.html">android</a>
        /
	<a href="./tag/viewpager.html">viewpager</a>
        /
	<a href="./tag/ye-mian-zhi-shi-qi.html">页面指示器</a>
        
</footer><!-- /.post-info -->                    </div>
                </div>
                <ul>
<li>在页面滑动时会回调<code>ViewPager.OnPageChangeListener</code>接口里的方法. 用<code>ViewPage.addOnPageChangeListener</code>添加和<code>ViewPage.removeOnPageChangeListener</code>删除监听回调方法. 如果不想实现所有方法, <code>ViewPager</code>内有个空的类<code>SimpleOnPageChangeListener</code>实现了这个接口, 继承这个类便可. <strong>注意可以多次调用<code>addOnPageChangeListener</code>方法添加多个回调, <code>ViewPager</code>按添加顺序进行调用, 所以在不需要回调时, 及时的使用<code>removeOnPageChangeListener</code>来删除回调方法</strong>. 另外还需要<strong>注意的是<code>ViewPager.getCurrentItem</code>返回值和<code>OnPageSelected</code>参数是一样的, 即是成功滑动后的目标页面索引, 无论当前页面是否还在滑动中</strong></li>
</ul>
<ol>
<li>
<p>在滑动的时候会调用<code>OnPageScrolled(int position, float positionOffset, int positionOffsetPixels)</code></p>
<ul>
<li>参数<code>position</code>指的是在滑动时<strong>当前显示页面</strong>的<strong>左边页面的位置</strong>, 具体来说是</li>
</ul>
<blockquote>
<p><em>i.</em> 在<strong>向右</strong>滑动时, <code>position</code>的值为当前页面的值, 如果滑动成功(即滑动到右一页面), <code>OnPageScrolled</code>会被再一次调用, 此时<code>position</code>的值为滑动成功后的页面<code>position+1</code>, 如果滑动失败, <code>position</code>依然不变</p>
<div class="highlight"><pre><span></span> 从 `0`滑动`1`时, 滑动时`position`是`0`, 滑动成功后`OnPageScrolled`会再被调用一次且`position`会变成`1`, 滑动失败`position`依然为`0`, 这跟向左滑动有区别, 需要注意
</pre></div>


<p><em>ii.</em> 在<strong>向左</strong>滑动时, <code>position</code>的值为滑动的目标页面, 滑动成功后, 不会再次调用<code>OnPageScrolled</code>. 如果滑动失败, 最后一次会再次调用<code>OnPageScrolled</code>, 此时<code>position</code>为原先页面.</p>
<p>​     从<code>1</code>滑动到<code>0</code>时, <code>position</code>的值为<code>0</code>, 成功滑动到页面<code>1</code>后也不会再次调用该方法, 这个有区别于向右滑动. 然而如果滑动失败, 则会再一次调用该方法, 此时<code>position</code>的值为<code>1</code></p>
</blockquote>
<ul>
<li>参数<code>positionOffset</code>指的是滑动时, <code>index</code>为<code>position + 1</code>的页面占显示窗口(<code>ViewPager</code>)的百分比, 其取值为<code>[0, 1)</code>, 当值为<code>0</code>时, 页面停止滑动. </li>
</ul>
<blockquote>
<p><em>i.</em> 向右滑动时, <code>positionOffset</code>从<code>0</code>变大到接近<code>1</code>(不包含), 最后变成<code>0</code>(滑动停止时)</p>
<p><em>ii.</em> 向左滑动时, <code>positionOffset</code>从<code>1</code>(不包含)变小到<code>0</code>(当为<code>0</code>时已经停止滑动)</p>
</blockquote>
<ul>
<li><code>positionOffsetPixels</code>指的是滑动像素值, 情况和<code>positionOffset</code>是一致的. </li>
</ul>
<blockquote>
<p><em>i.</em> 向右滑动, <code>positionOffsetPixels</code>一直增大到和显示窗口(<code>ViewPager</code>)一样, 滑动停止时变为<code>0</code></p>
<p><em>ii.</em> 向左滑动, <code>positionOffsetPixels</code>从窗口大小一直减小到<code>0</code></p>
</blockquote>
</li>
<li>
<p><code>OnPageSelected(int position)</code> </p>
<p>该方法会在滑动成功时立即被调用, 滑动成功的意思指手指在滑动页面<strong>足够长</strong>的距离后, 手指离开屏幕的一瞬间, 屏幕会自行滑动到目标页面即为滑动成功; 如果<strong>距离不够</strong>, 页面会回弹, 即为滑动失败. <code>OnPageSelected</code>会在滑动成功的瞬间立即被调用, 无论当前页面是否还在滑动中. <code>position</code>指的是目标页面的索引值. <strong>注意<code>OnPageSelected</code>在调用时, <code>OnPageScrolled</code>可能会还在继续被调用中</strong></p>
</li>
<li>
<p><code>OnPageScrollStateChanged(int state)</code></p>
<p>该方法在页面状态有改变时会调用, <code>state</code>指当前页面的状态, 一共有三个状态. </p>
<blockquote>
<p><em>i.</em> <code>ViewPager.SCROLL_STATE_DRAGGING</code> 页面在拖拽, 值为<code>1</code></p>
<p><em>ii.</em> <code>ViewPager.SCROLL_STATE_SETTLING</code> 手指离开屏幕, 页面正滑向目标页面, 值为<code>2</code></p>
<p><em>iii.</em> <code>ViewPager.SCROLL_STATE_IDLE</code> 页面空闲中, 无任何滑动拖拽动画, 值为<code>0</code></p>
</blockquote>
<p>页面的状态总是会经历<code>1</code>,  <code>2</code>,  <code>0</code>的顺序状态, 手指按到屏幕时, 状态为<code>1</code>, 手指离开屏幕时, 状态为<code>2</code>, 页面无任何动画时, 状态为<code>0</code></p>
</li>
</ol>
<h5 id="reference">Reference:</h5>
<ol>
<li>http://dalufan.com/2015/09/08/android-setOnPageChangeListener/</li>
</ol>
            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">
        <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="#"><i class="fa fa-you-can-add-links-in-your-config-file-square fa-lg"></i> You can add links in your config file</a></li>
                <li class="list-group-item"><a href="#"><i class="fa fa-another-social-link-square fa-lg"></i> Another social link</a></li>
              </ul>
            </li>





    <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
      <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="http://getpelican.com/" target="_blank">
                Pelican
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://python.org/" target="_blank">
                Python.org
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://jinja.pocoo.org/" target="_blank">
                Jinja2
            </a>
        </li>
        <li class="list-group-item">
            <a href="#" target="_blank">
                You can modify those links in your config file
            </a>
        </li>
      </ul>
    </li>
    </ul>
</section>            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2018 ivicel
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="./theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="./theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="./theme/js/respond.min.js"></script>


</body>
</html>