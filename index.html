<!DOCTYPE html>
<html lang="zh" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Amber time</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href=".">
        <meta name="author" content="ivicel" />

    <!-- Open Graph tags -->
        <meta property="og:site_name" content="Amber time" />
        <meta property="og:type" content="website"/>
        <meta property="og:title" content="Amber time"/>
        <meta property="og:url" content="."/>
        <meta property="og:description" content="Amber time"/>


    <!-- Bootstrap -->
        <link rel="stylesheet" href="./theme/css/bootstrap.min.css" type="text/css"/>
    <link href="./theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="./theme/css/pygments/emacs.css" rel="stylesheet">
    <link rel="stylesheet" href="./theme/css/style.css" type="text/css"/>
        <link href="./theme/css/custom.css" rel="stylesheet">





</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="./" class="navbar-brand">
Amber time            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li >
                            <a href="./category/android.html">Android</a>
                        </li>
                        <li >
                            <a href="./category/c-language.html">C language</a>
                        </li>
                        <li >
                            <a href="./category/data-structure-algorithms.html">Data structure algorithms</a>
                        </li>
                        <li >
                            <a href="./category/database.html">Database</a>
                        </li>
                        <li >
                            <a href="./category/java.html">Java</a>
                        </li>
                        <li >
                            <a href="./category/javascript.html">Javascript</a>
                        </li>
                        <li >
                            <a href="./category/python.html">Python</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
            <article>
                <h2><a href="./ji-yu-uwsgi-de-shi-xian-flask-de-websocket-lian-jie-steamkey-de-yi-zhi.html">基于 uwsgi 的实现 flask 的 websocket 连接 -- steamkey 的移植</a></h2>
                <div class="summary"><p><a href="https://github.com/ivicel/steam-key-python">steam-key-python</a> 是 <a href="https://github.com/zyfworks/steam-key">steam-key</a> 的python 移植, 原开发基于 node.js.</p>
<p>使用到的主要开发包:</p>
<ul>
<li><a href="https://github.com/ValvePython/steam">steam</a> 一个用 python 实现的 steamkit</li>
<li>flask web 框架</li>
<li>gevent 异步框架</li>
<li>uwsgi 后端 server</li>
</ul>
<h5 id="1-flask-websocket">1. flask 结合 websocket 问题</h5>
<p>根据 Websocket 协议, 从 HTTP 升级到 Websocket 要发送以下 GET 请求, 来协商</p>
<div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/websocket</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Connection</span><span class="o">:</span> <span class="l">Upgrade</span>
<span class="na">Upgrade</span><span class="o">:</span> <span class="l">websocket</span>
<span class="na">Sec-WebSocket-Version</span><span class="o">:</span> <span class="l">13</span>
<span class="na">Sec-WebSocket-Key …</span></pre></div>
                    <a class="btn btn-default btn-xs" href="./ji-yu-uwsgi-de-shi-xian-flask-de-websocket-lian-jie-steamkey-de-yi-zhi.html">more ...</a>
                </div>
            </article>
            <hr/>
            <article>
                <h2><a href="./shu-ju-jie-gou-pythonmiao-shu-di-6-zhang-er-cha-shu-yu-shu.html">数据结构(Python描述) 第 6 章 二叉树与树</a></h2>
                <div class="summary"><h4 id="1">1. 二叉树</h4>
<h5 id="11">1.1 概念</h5>
<ul>
<li>不包含任何结点的称为<strong>空树</strong>, 只包含一个结点称为<strong>单点树</strong></li>
<li>没有子结点的称为<strong>树叶</strong>, 非树叶结点称为<strong>分支结点</strong>, 对于二叉树有左分支, 右分支</li>
<li>一个结点的子结点个数称为该结点的<strong>度数</strong>, 很明显度只能取 <code>[0, 1, 2]</code> 三个值</li>
<li><strong>路径</strong>: 从祖先结点到子孙结点包含的一系列边, 称为路径. </li>
<li>二叉树是分层的, 根结点所在为第 0 层. 树中结点的最大层数称为树的<strong>高度</strong></li>
<li><strong>满二叉树</strong>: 二叉树中的所有分支结点的度数都是 2</li>
<li><strong>扩充二叉树</strong>: 对于二叉树 T, 加入足够多的新的结点, 使 T 原有的结点的度都变成 2, 得到的这棵新树称为扩充二叉树. 扩充二叉树新加入的结点称为<strong>外部结点</strong>, 原来的结点称为<strong>内部结点</strong></li>
<li><strong>完全二叉树</strong>: 对于高度为 h …</li></ul>
                    <a class="btn btn-default btn-xs" href="./shu-ju-jie-gou-pythonmiao-shu-di-6-zhang-er-cha-shu-yu-shu.html">more ...</a>
                </div>
            </article>
            <hr/>
            <article>
                <h2><a href="./shu-ju-jie-gou-pythonmiao-shu-di-7-zhang-tu.html">数据结构(Python描述) 第 7 章 图</a></h2>
                <div class="summary"><h4 id="1">1. 概念, 性质, 实现</h4>
<h5 id="11">1.1 定义</h5>
<p>图是一个二元组 <code>G=(V, E)</code>, <code>V</code> 是非空有穷的顶点集合, <code>E</code> 是顶点的边, 也是顶点之间的相互直接联系</p>
<p>图分为有向图, 无向图. 根据边的关系类型来分</p>
<ul>
<li><strong>邻接点</strong>: 无向图中, 相互连接起来的就叫邻接点, 有向图中, x 指向 y, y 是 x 的邻接点. 这个连接的边就叫 <strong>邻接边</strong></li>
<li>顶点的 <strong>度</strong>: 一个顶点有几条邻接边, 叫做该点的度. 对于无向图和邻接点是一个意思. 不过对于有向图就不一样了. 有<strong>出度</strong>和<strong>入度</strong>之分. 意思是指出去的方向的邻接边数量, 和指向自己的边的数量</li>
<li><strong>路径长度</strong>: 点 a 到点 b …</li></ul>
                    <a class="btn btn-default btn-xs" href="./shu-ju-jie-gou-pythonmiao-shu-di-7-zhang-tu.html">more ...</a>
                </div>
            </article>
            <hr/>
            <article>
                <h2><a href="./shu-ju-jie-gou-pythonmiao-shu-di-8-zhang-zi-dian-yu-ji-he.html">数据结构(Python描述) 第 8 章 字典与集合</a></h2>
                <div class="summary"><p>字典是一种支持基于关键码的数据存储与检索的数据结构, 也称就查找表, 映射, 关联表等.</p>
<h4 id="1">1. 字典的线性表实现</h4>
<ul>
<li>使用一个数组来保存字典的 key, 如果我们不考虑重复问题, 每次添加新的 key 都是在末尾添加, 这样都是 <code>O(1)</code>, 而在查找方面, 需要遍历所有的值, 所以是 <code>O(n)</code>, 删除操作也是一样需要 O(n). 基于这种表的字典: </li>
<li>数据结构和算法简单, 检索方便</li>
<li>检索效率低, 当表很大时, 检索很耗时</li>
<li>删除操作也很耗时, 删除后还需要移动后面的数据</li>
<li>依旧使用的一个数组来实现. 不过我们会保持数组(key)处于一个有序的状态. 这样检索和删除时, 使用二分查找, 查找效率是 <code>O(logN)</code>, 而在删除或者添加数据时, 为保证数组总是有序, 我们可能需要移动整个数组, 所以最差是 <code>O(n)</code>. 这种实现方法也不适合经常添加, 删除数据, 而如果一次生成, 多次查找 …</li></ul>
                    <a class="btn btn-default btn-xs" href="./shu-ju-jie-gou-pythonmiao-shu-di-8-zhang-zi-dian-yu-ji-he.html">more ...</a>
                </div>
            </article>
            <hr/>
            <article>
                <h2><a href="./a-simple-steamkit-implement-with-using-pythonyi.html">A Simple SteamKit implement with using Python(一)</a></h2>
                <div class="summary"><h4 id="1">1. 连接握手</h4>
<ol>
<li>
<p>与 steam 客户端进行通信的称为 CM Server, Steam 客户端首先要向发送一个连接请求, 然后服务器会返回一个 <code>CHANNEL_ENCRYPT_REQUEST</code>, 这个消息包会带有一个 16 字节的 质询 <code>challenge</code></p>
</li>
<li>
<p>我们随机生生成一个 256 位长度的密钥 <code>session_key</code>,  使用 steam 的公钥对密钥加密后再发回给服务器, 加密方法为 <code>RSA</code>, padding 为 <code>OAEP(mgf=MGF1(algorithm=SHA1), algorithm=SHA1)</code> </p>
</li>
</ol>
<blockquote>
<p>这里可里选择只发送回 <code>session_key</code>(legacy mode), 或者回应质询 <code>session_key + challenge</code>, 发回后者表示在以后的通信中使用每次会生成一个 <code>SHA1-HMAC</code>. </p>
</blockquote>
<ol>
<li>收到服务的 <code>session_key</code> 确认, 结果为 <code>EResult.OK</code> 时 …</li></ol>
                    <a class="btn btn-default btn-xs" href="./a-simple-steamkit-implement-with-using-pythonyi.html">more ...</a>
                </div>
            </article>
            <hr/>
            <article>
                <h2><a href="./wsgi-xie-yi.html">WSGI 协议</a></h2>
                <div class="summary"><h4 id="1">1. 简介</h4>
<p>WSGI(Web Server Gateway Interface) 定义在 <a href="https://www.python.org/dev/peps/pep-3333/">PEP 3333</a> 中, WSGI 不是要重新创造一个 web server 或者 framework, 而是定义一个标准接口, 实现这个标准接口的 web server 都可以通过该接口调用 python 程序, 从而使用 python 程序来处理网络数据, 然后再发回给 client.</p>
<p>WSGI 实现分为 client 端和 server 端, 并且 WSGI 是可以按层堆叠的, 中间层称为 middleware. middleware 其实质就是实现了 client, server 两种, 这样来看, 上层总是下层的 server, 下层是上层的 client …</p>
                    <a class="btn btn-default btn-xs" href="./wsgi-xie-yi.html">more ...</a>
                </div>
            </article>
            <hr/>
            <article>
                <h2><a href="./android-tong-zhi.html">Android 通知</a></h2>
                <div class="summary"><div class="toc">
<ul>
<li><a href="#1">1. 简介</a><ul>
<li><a href="#11">1.1 通知可出现的地方</a></li>
<li><a href="#12">1.2 通知基础结构</a></li>
<li><a href="#13">1.3 通知的兼容性</a><ul>
<li><a href="#andorid-41-api-level-16">Andorid 4.1, API level 16</a></li>
<li><a href="#andorid-44-api-level-19">Andorid 4.4, API level 19</a></li>
<li><a href="#andorid-50-api-level-21">Andorid 5.0, API level 21</a></li>
<li><a href="#andorid-70-api-level-24">Andorid 7.0, API level 24</a></li>
<li><a href="#andorid-80-api-level-26">Andorid 8.0, API level 26</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#2-notification-actions">2. 创建通知及通知行为(Notification actions)</a><ul>
<li><a href="#21">2.1 基本通知的创建</a></li>
<li><a href="#22-tap-action">2.2 …</a></li></ul></li></ul></div>
                    <a class="btn btn-default btn-xs" href="./android-tong-zhi.html">more ...</a>
                </div>
            </article>
            <hr/>
            <article>
                <h2><a href="./android-dong-hua-fen-xi.html">Android 动画分析</a></h2>
                <div class="summary"><p>Android 的动画分为以下两类:</p>
<ol>
<li>View 动画
   * 补间动画(Tween Animation, <code>Animation</code> 类及其子类): 通过对 view 不断的作 rotate, scale, translate 等一系列操作从而达到动画效果, xml 文件放在 <code>res/anim/</code> 目录中
   * 帧动画(Frame Animation, <code>AnimationDrawable</code> 类): 通过播放一系列预先生成好的图片达到的动画效果, 像电影胶片一样, 因为是不断的更换图片, 容易产生 OOM, xml 文件放在 <code>res/drawable/</code> 目录中</li>
<li>属性动画(Property Animation): 通过不断的改变 view 的各种属性而达到动画效果,  帧动画存放在 <code>res/animator/</code> 中</li>
</ol>
<p>动画的定义可以由 xml 格式来定义, 也可以直接在 …</p>
                    <a class="btn btn-default btn-xs" href="./android-dong-hua-fen-xi.html">more ...</a>
                </div>
            </article>
            <hr/>
            <article>
                <h2><a href="./android-drawablezi-yuan.html">Android Drawable资源</a></h2>
                <div class="summary"><h3 id="1-drawable">1. drawable 简述</h3>
<p>drawable 在 Android 中是一个抽象的概念, 对应抽象类 <code>android.graphics.drawable.Drawable</code>, 包括了各种形式的图片, 层级样式, 状态样式等. drawable 可以在 <code>res/drawable</code> 中以 <code>xml</code> 来定义. 也可以在 java 中生成. 大概分为以下 10 种.</p>
<ol>
<li><a href="https://developer.android.com/guide/topics/resources/drawable-resource#Bitmap">Bitmap File</a> <code>.png</code>(最好), <code>.jpg</code>(次), <code>.gif</code>(尽量不要用)等格式的图片. 对应 <code>BitmapDrawable</code> </li>
<li><a href="https://developer.android.com/guide/topics/resources/drawable-resource#NinePatch">Nine-Patch File</a> <code>.9.png</code> 图片.对应 <code>NinePatchDrawable</code> </li>
<li><a href="https://developer.android.com/guide/topics/resources/drawable-resource#LayerList">Layer List</a> 多层次 drawable …</li></ol>
                    <a class="btn btn-default btn-xs" href="./android-drawablezi-yuan.html">more ...</a>
                </div>
            </article>
            <hr/>
            <article>
                <h2><a href="./android-view-de-zuo-biao-xi.html">Android View 的坐标系</a></h2>
                <div class="summary"><p>屏幕的坐标原点为屏幕的左上角, 往右为<strong>正向x轴</strong>, 往下为<strong>正向y轴</strong>. 坐标参数顺序一般为<code>左</code>, <code>上</code>, <code>右</code>, <code>下</code></p>
<p>子<code>view</code>可以获取其相对于父<code>ViewGroup</code>的坐标.  这个要跟点击事件<code>MotionEvent</code>的坐标获取方法区别开来</p>
<p><code>view</code>由于是一个框模型, 所以当确定左上点和右下点的位置, 我们便可以确定一个<code>view</code>的大小和位置.
左上点坐标为 <strong>(<code>View.getLeft()</code>, <code>View.getTop()</code>)</strong>, 右下点坐标 <strong>(<code>View.getRight()</code>, <code>View.getBottom()</code>)</strong></p>
<p><code>view</code> 的大小: </p>
<p>宽度 <code>width = getRight() - getLeft()</code> </p>
<p>高度 <code>height = getBottom() - getTop()</code></p>
<blockquote>
<p>这也是 <code>getWidth()</code>, <code>getHeight()</code> 的算法. 其和 <code>getMeasuredWidth …</code></p></blockquote>
                    <a class="btn btn-default btn-xs" href="./android-view-de-zuo-biao-xi.html">more ...</a>
                </div>
            </article>
            <hr/>

        <ul class="pagination">
                <li class="prev disabled"><a href="#">&laquo;</a></li>
                    <li class="active"><a
                            href="./index.html">1</a></li>
                    <li class=""><a
                            href="./index2.html">2</a></li>
                    <li class=""><a
                            href="./index3.html">3</a></li>
                    <li class=""><a
                            href="./index4.html">4</a></li>
                    <li class=""><a
                            href="./index5.html">5</a></li>
                <li class="next"><a
                        href="./index2.html">&raquo;</a></li>
        </ul>
        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">
        <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="#"><i class="fa fa-you-can-add-links-in-your-config-file-square fa-lg"></i> You can add links in your config file</a></li>
                <li class="list-group-item"><a href="#"><i class="fa fa-another-social-link-square fa-lg"></i> Another social link</a></li>
              </ul>
            </li>





    <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
      <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="http://getpelican.com/" target="_blank">
                Pelican
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://python.org/" target="_blank">
                Python.org
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://jinja.pocoo.org/" target="_blank">
                Jinja2
            </a>
        </li>
        <li class="list-group-item">
            <a href="#" target="_blank">
                You can modify those links in your config file
            </a>
        </li>
      </ul>
    </li>
    </ul>
</section>            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2018 ivicel
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="./theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="./theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="./theme/js/respond.min.js"></script>


</body>
</html>