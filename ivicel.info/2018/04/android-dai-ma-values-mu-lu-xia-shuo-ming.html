<!DOCTYPE html>
<html lang="en">
    <head>
            <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="google-site-verification" content="WpfeDx8HRNQcT7jzjSsZ0vhtfw8M7gFo-YoDmXZRGHg"/>
        <meta name="google-site-verification" content="H97dWyn-QYy4n8BEw7ZAX8bFDDin_BwYiEOb3v_4dEs" />
        <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
        
  
        <title>
Ambertime        </title>

        <!-- Web App Manifest -->
        <link rel="manifest" href="/assets/pwa/manifest.json" />

        <!-- Favicon -->
        <link rel="shortcut icon" href="/assets/images/favicon.ico"/>
        <!-- Canonical URL -->
        <link rel="canonical" href="" />
        <link rel="stylesheet" href="/theme/css/bootstrap.min.css" />

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/theme/css/hux-blog.min.css" />
        <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
        <link rel="stylesheet" href="/theme/css/prism.css" />
        <link rel="stylesheet" href="/theme/css/ivicel.css" />

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
        


    <style type="text/css">
    header.intro-header{
        position: relative;
        background-image: url('/assets/images/header.jpg');
    }

    header.intro-header .header-mask{
        width: 100%;
        height: 100%;
        position: absolute;
        background: rgba(0,0,0, 0.3);
    }
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>
    </head>


    <!-- hack iOS CSS :active style -->
    <body ontouchstart="">
<!-- Navigation -->
<!-- <nav class="navbar navbar-default navbar-custom navbar-fixed-top invert"> -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Ambertime</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                        <li>
                            <a href="/archives">ARCHIVES</a>
                        </li>
                        <li>
                            <a href="/about">ABOUT</a>
                        </li>
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    var __HuxNav__ = {
        close: function(){
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        },
        open: function(){
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }

    // Bind Event
    $toggle.addEventListener('click', function(e){
        if ($navbar.className.indexOf('in') > 0) {
            __HuxNav__.close()
        }else{
            __HuxNav__.open()
        }
    })

    /**
     * Since Fastclick is used to delegate 'touchstart' globally
     * to hack 300ms delay in iOS by performing a fake 'click',
     * Using 'e.stopPropagation' to stop 'touchstart' event from 
     * $toggle/$collapse will break global delegation.
     * 
     * Instead, we use a 'e.target' filter to prevent handler
     * added to document close HuxNav.  
     *
     * Also, we use 'click' instead of 'touchstart' as compromise
     */
    document.addEventListener('click', function(e){
        if(e.target == $toggle) return;
        if(e.target.className == 'icon-bar') return;
        __HuxNav__.close();
    })
</script> 
        
<!-- Post Header -->

<header class="intro-header" >
    <div class="header-mask"></div>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        <a class="tag" href="#" title="resources">resources</a>
                        <a class="tag" href="#" title="android资源文件">android资源文件</a>
                        <a class="tag" href="#" title="attrs">attrs</a>
                        <a class="tag" href="#" title="style">style</a>
                        <a class="tag" href="#" title="styleable">styleable</a>
                    </div>
                    <h1>Android 代码 values 目录下说明</h1>
                    <span class="meta">Posted by ivicel on 2018-04-22</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<div class="container">
    <article>
        <div class="row">
            <!-- Post Container -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 post-container">
                <p>对于 Android 源代码目录下 <code>values/*</code> 文件, 其所有的 xml 文件根标签都是 <code>resource</code>. aapt 会把这个目录下的文件全部 build  出 java 可引用的整型数值, 这样的便可以通过 <code>R.[type].[name]</code> 来引用到. 其类型只和标签名有关, 对放在哪个文件无关. 一般我们会把这些个类型不同的分别放在不 <code>values/*</code> 下不同的文件里只是为了方便编码时自己查看.一般有以下几种类型:</p>
<h3>1. style 主题文件</h3>
<p>主题文件一般有两种, 一个是 <code>style</code>, 一个是属性 <code>attr</code></p>
<ol>
<li>style 标签是主题文件. 一般我们会从系统中的主题, 或者是某个 view 来继承. 或者也可以自己单独写而不继承. <strong>style 标签里 item 的 name 值需要已经是有定义过了的, 可以是系统预先定义好的, 或者是自己再使用 attr 定义的.</strong> 使用 <code>R.style.[name]</code> 来引用. 在 xml 文件中使用 <code>style=@style/[name]</code> . 一般放在 <code>values/styles.xml</code></li>
</ol>
<pre class="highlight line-numbers"><code class="language-xml linenums">&lt;!-- 自定义主题并继承 support 包里的主题 
 继承的主题可以在 3 个地方使用, 全局 application, 单个 activity, 某个 view  
 --&gt;
&lt;style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar"&gt;
    &lt;!-- 覆写 support 主题里的值 --&gt;
    &lt;item name="colorPrimary"&gt;@color/colorPrimary&lt;/item&gt;
    &lt;!-- 覆写系统主题里的值, 这其实是一个 framework 里的内部 attr --&gt;
    &lt;item name="android:textViewStyle"&gt;@style/BlueTextStyle&lt;/item&gt;
    &lt;!-- 覆写系统主题里的值 --&gt;
    &lt;item name="android:textSize"&gt;18sp&lt;/item&gt;
    &lt;!-- 自定义的属性值 --&gt;
    &lt;item name="source_name"&gt;sources&lt;/item&gt;
&lt;/style&gt;
&lt;attr name="source_name" format="string"/&gt; 
&lt;!-- 自定义的 style, 可以在 layout 中的 view 直接引用 style=@style/BlueTextStyle --&gt;
&lt;style name="BlueTextStyle"&gt;
    &lt;item name="android:textColor"&gt;@android:color/holo_blue_light&lt;/item&gt;
&lt;/style&gt;</code></pre>

<ol>
<li>使用 attr 的原因是为自定义 view 添加属性, 另外是方便更改属性的值. 有两种定义方式. </li>
</ol>
<p>一种是直接在 <code>resources</code> 下定义</p>
<pre class="highlight line-numbers"><code class="language-xml linenums">&lt;resources&gt;
    &lt;attr name="one" format="reference"/&gt;
&lt;/resources&gt;</code></pre>

<p>一种是在外面包一层 <code>declare-styleable</code> 标签. </p>
<pre class="highlight line-numbers"><code class="language-xml linenums">&lt;!-- 引用整组为 R.styleable.MyAttrs, 单个为 R.styleable.MyAttrs_other_one --&gt;
&lt;resources&gt;
    &lt;declare-styleable name="MyAttrs"&gt;
        &lt;!-- 这个是 attr 的定义 --&gt;
     &lt;attr name="other_one" format="reference"/&gt;
        &lt;!-- 这个是对已经定义的 attr 引用, 没有 format 值 --&gt;
        &lt;attr name="one"/&gt;
 &lt;/declare-styleable&gt;
&lt;/resources&gt;</code></pre>

<p>使用 <code>declare-styleable</code> 主要有两点</p>
<ul>
<li>它提供了一个数组的引用 <code>R.styleable.[styleable-name]</code> 引用(组里成员引用为 <code>R.styleable.[styleable-name]_[attr-name]</code> 注意组名和成员名是用下划线_连接) 由于在使用 <code>Theme#obtainStyledAttributes()</code> 的参数, 如果我们直接引用 <code>R.attr.one</code> 也是要组成一个数组的</li>
<li>如果我们有不同的自定义的 view, 比如 MyTextView, MyOtherTextView, 这样使用分组便于管理</li>
</ul>
<p>#### attr 属性的 format 取值</p>
<blockquote>
<p>当 attr 中没有 format 值时, 是对已经定义了的 attr 的引用</p>
</blockquote>
<ol>
<li>
<p><code>reference</code> 引用. 某个资源 ID.</p>
<pre class="highlight line-numbers"><code class="language-xml linenums">&lt;attr name="my_bg" format="reference"/&gt;

&lt;TextView
  app:my_bg="@drawable/bg"/&gt;</code></pre>

</li>
<li>
<p><code>color</code> 颜色值.</p>
</li>
<li>
<p><code>boolean</code> 布尔值</p>
</li>
<li>
<p><code>dimension</code> 尺寸值</p>
</li>
<li>
<p><code>float</code> 浮点数</p>
</li>
<li>
<p><code>integer</code> 整型</p>
</li>
<li>
<p><code>string</code> 字符串</p>
</li>
<li>
<p><code>fraction</code> 百分数. 使用时类似系统 <code>android:pivotX="200%"</code></p>
</li>
<li>
<p><code>enum</code> 枚举类型. 使用时只能取一个惟一值. </p>
<pre class="highlight line-numbers"><code class="language-xml linenums">&lt;declare-styleable name="MyDirection"&gt; 
    &lt;attr name="orientation"&gt; 
        &lt;enum name="horizontal" value="0" /&gt; 
        &lt;enum name="vertical" value="1" /&gt; 
    &lt;/attr&gt;
&lt;/declare-styleable&gt;</code></pre>

</li>
<li>
<p><code>flag</code> 标志位, 使用时通过 <code>|</code> 竖线来设置单个或多个值, 如 <code>stateOne | stateTwo</code> 这样</p>
<pre class="highlight line-numbers"><code class="language-xml linenums">&lt;declare-styleable name="MyState"&gt; 
    &lt;attr name="windowSoftInputMode"&gt; 
        &lt;flag name="stateOne" value="0x01" /&gt; 
        &lt;flag name="stateTwo" value="0x10" /&gt; 
    &lt;/attr&gt;
&lt;/declare-styleable&gt;

</code></pre>

</li>
<li>
<p>混合类型, 比如支持 <code>string|reference</code> 这种, 使用 <code>|</code> 竖线分隔开</p>
</li>
</ol>
<h3>2. 其他资源文件</h3>
<ol>
<li><a href="https://developer.android.com/guide/topics/resources/more-resources.html#Bool">Bool</a> 布尔型, 只有(true/false)两个值</li>
</ol>
<p>使用 <code>R.bool.[name]</code>, <code>@bool/[name]</code> 来引用. 一般存放在 <code>values/bools.xml</code>. </p>
<p><pre class="highlight line-numbers"><code class="language-xml linenums">&lt;resources&gt;
    &lt;bool name="screen_small"&gt;true&lt;/bool&gt;
&lt;/resources&gt;</code></pre>
2. <a href="https://developer.android.com/guide/topics/resources/more-resources.html#Color">Color</a> 颜色, 一个 16 进制的值(#<em>RGB</em>, #<em>ARGB</em>, #<em>RRGGBB</em>, #<em>AARRGGBB</em>). 跟 <code>res/colors</code> 下的区别是, 这里的值一般只存储单一的颜色值. 使用 <code>R.color.[name]</code>, <code>@color/[name]</code> 来引用, 存放在 <code>values/colors.xml</code></p>
<p><pre class="highlight line-numbers"><code class="language-xml linenums">&lt;resources&gt;
   &lt;color name="opaque_red"&gt;#f00&lt;/color&gt;
   &lt;color name="translucent_red"&gt;#80ff0000&lt;/color&gt;
&lt;/resources&gt;</code></pre>
3. <a href="https://developer.android.com/guide/topics/resources/more-resources.html#Dimension">Dimension</a> 长度尺寸, 有 dp, sp, pt, px, mm, in 单位. 最主要用到的是 <code>dp</code> 和 <code>sp</code>. <code>dp</code> 是一种与设备 DPI 无关的单位, 换算公式为 <code>px = dp * (dpi / 160)</code>. 一共有 <code>ldpi(120)</code>, <code>mdpi(160)</code>, <code>hdpi(240)</code>, <code>xhdpi(320)</code>, <code>xxhdpi(480)</code>, <code>xxxhdpi(640)</code>, <code>nodpi</code>, <code>tvdpi</code>. 通过 <code>DisplayMetrics#densityDpi</code> 来获取该设备的 dpi, <code>DisplayMetrics.density</code> 来获取比值, 即 *<em>设备dpi / 基准dpi *</em>(<code>DisplayMetrics.densityDpi / 160</code>). 使用 <code>R.dimen.[name]</code>, <code>@dimen/[name]</code> 来引用</p>
<blockquote>
<p>注意: Android 只有以上几种 dpi 比值, 当设备 dpi 和上设定的不完全相等时, 会取近似值. 比如 165 取得 160</p>
</blockquote>
<pre class="highlight line-numbers"><code class="language-xml linenums">&lt;resources&gt;
    &lt;dimen name="textview_height"&gt;25dp&lt;/dimen&gt;
    &lt;dimen name="font_size"&gt;16sp&lt;/dimen&gt;
&lt;/resources&gt;</code></pre>

<ol>
<li><a href="https://developer.android.com/guide/topics/resources/more-resources.html#Id">ID</a> 独一无二的 ID 值. 一般我们会在 layout 文件中直接用 <code>@+id/id_name</code> 来建立, 不过, 当我们有许多地方需要用到这个 id 时, 单独建立文件 <code>values/ids.xml</code> 来设置这个 id, 然后在需要的地方引用就可. 特别是 <code>ConstraintLayout</code> 这个需要前后引用 id 来设定 view 的位置时, 就减少了工作量, 不必总使用 <code>@+id/id_name</code> 来保证 id 一定存在了.  通过 <code>R.id.[name]</code>, <code>@id/[name]</code>  来引用. 存放在 <code>values/ids.xml</code></li>
</ol>
<pre class="highlight line-numbers"><code class="language-xml linenums">&lt;resources&gt;
    &lt;item type="id" name="button_ok" /&gt;
&lt;/resources&gt;

&lt;!-- layout 中引用 --&gt;
&lt;Button android:id="@id/button_ok"/&gt;</code></pre>

<ol>
<li><a href="https://developer.android.com/guide/topics/resources/more-resources.html#Integer">Integer</a> 整数值, 通过 <code>R.integer.[name]</code>, <code>@integer/[name]</code> 来引用. 存放在 <code>values/integers.xml</code></li>
</ol>
<pre class="highlight line-numbers"><code class="language-xml linenums">&lt;resources&gt;
    &lt;integer name="max_speed"&gt;75&lt;/integer&gt;
&lt;/resources&gt;</code></pre>

<ol>
<li><a href="https://developer.android.com/guide/topics/resources/more-resources.html#IntegerArray">Integer Array</a> 整型数值, 通赤 <code>R.array.[name]</code> 来引用. 使用 java 来解析. <code>getResources().getInArray(R.array.bits)</code>. 存放在 <code>values/integers.xml</code></li>
</ol>
<pre class="highlight line-numbers"><code class="language-xml linenums">&lt;resources&gt;
    &lt;integer-array name="bits"&gt;
        &lt;item&gt;4&lt;/item&gt;
        &lt;item&gt;8&lt;/item&gt;
        &lt;item&gt;16&lt;/item&gt;
        &lt;item&gt;32&lt;/item&gt;
    &lt;/integer-array&gt;
&lt;/resources&gt;</code></pre>

<ol>
<li><a href="https://developer.android.com/guide/topics/resources/more-resources.html#TypedArray">Typed Array</a> 混合型数组, 可以引用其他的资源, 数组里可以是引用同一类型的值, 也可以是不同的类型, 当引用不同类型时, 在解析的时候就有注意判断类型值. 使用 <code>R.array.[name]</code> 引用, 然后有 Java 代码中使用 <code>obtainTypedArray()</code> 来解析具体的值. 存放在 <code>values/arrays.xml</code></li>
</ol>
<pre class="highlight line-numbers"><code class="language-xml linenums">&lt;resources&gt;
    &lt;array name="icons"&gt;
        &lt;item&gt;@drawable/home&lt;/item&gt;
        &lt;item&gt;@drawable/settings&lt;/item&gt;
        &lt;item&gt;@drawable/logout&lt;/item&gt;
    &lt;/array&gt;
&lt;/resources&gt;</code></pre>

<p>java 解析代码示例</p>
<pre class="highlight line-numbers"><code class="language-java linenums">TypedArray icons = getResources().obtainTypedArray(R.array.icons);
Drawable drawable = icons.getDrawable(0);</code></pre>

<ol>
<li>
<p><a href="https://developer.android.com/guide/topics/resources/string-resource.html">String</a> 字符串. 使用 <code>R.string.[name]</code>, <code>@string/[name]</code> 引用. 存放在 <code>values/strings.xml</code></p>
</li>
<li>
<p><a href="https://developer.android.com/guide/topics/resources/string-resource.html">String Array</a> 字符串数组. 使用 <code>R.array.[name]</code>, <code>@string/name</code> 引用. 放在 <code>values/strings.xml</code></p>
</li>
</ol>
<pre class="highlight line-numbers"><code class="language-Xml linenums">&lt;resources&gt;
    &lt;string-array name="planets_array"&gt;
        &lt;item&gt;Mercury&lt;/item&gt;
        &lt;item&gt;Venus&lt;/item&gt;
        &lt;item&gt;Earth&lt;/item&gt;
        &lt;item&gt;Mars&lt;/item&gt;
    &lt;/string-array&gt;
&lt;/resources&gt;</code></pre>

<ol>
<li>
<p><a href="https://developer.android.com/guide/topics/resources/string-resource.html">String Plurals</a> 英文中的单复数形式</p>
<pre class="highlight line-numbers"><code class="language-xml linenums">&lt;resources&gt;
    &lt;plurals name="numberOfSongsAvailable"&gt;
        &lt;item quantity="one"&gt;Znaleziono %d piosenkę.&lt;/item&gt;
        &lt;item quantity="few"&gt;Znaleziono %d piosenki.&lt;/item&gt;
        &lt;item quantity="other"&gt;Znaleziono %d piosenek.&lt;/item&gt;
    &lt;/plurals&gt;
&lt;/resources&gt;</code></pre>

<p>​</p>
</li>
</ol>

                <hr style="visibility: hidden;">
                <ul class="pager">
                </ul>
                <hr style="visibility: hidden;">

                <!-- disqus 评论框 start -->
                <div class="comment">
                    <div id="disqus_thread" class="disqus-thread"></div>
                </div>
                <!-- disqus 评论框 end -->
            </div>  
        </div>
    </article>
</div>

 
        
<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- SNS Link -->

                <p class="copyright text-muted">
                    Copyright &copy; Ambertime 2019                    <br>
                    Powered by <a href="http://getpelican.com/">Pelican</a> | Theme by <a href="http://huangxuan.me">HuxPro</a>
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=ivicel&repo=ivicel.github.io&type=star&count=true" >
                    </iframe>
                    
                </p>
            </div>
        </div>
    </div>
</footer> 
        
        <script src="/theme/js/jquery.min.js"></script>
        <script src="/theme/js/bootstrap.min.js"></script>
        <script src="/theme/js/prism.js"></script>
        <script src="/theme/js/hux-blog.min.js"></script>
        <script src="/theme/js/snackbar.js"></script>
        <script src="/theme/js/sw-registration.js"></script>
        <!--fastClick.js -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
        <script type="text/x-mathjax-config">
            MathJax.Hub.Config({
                TeX: {
                equationNumbers: {
                    autoNumber: "AMS"
                }
                },
                tex2jax: {
                inlineMath: [ ['$','$'] ],
                displayMath: [ ['$$','$$'] ],
                processEscapes: true,
                }
            });
            </script>
        <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        </script>
        <!-- Google Analytics -->
        <script>
            var _gaId = "UA-113622715-2";
            var _gaDomain = "";

            // Originial
            (function(i, s, o, g, r, a, m) {
                i["GoogleAnalyticsObject"] = r;
                (i[r] =
                    i[r] ||
                    function() {
                        (i[r].q = i[r].q || []).push(arguments);
                    }),
                    (i[r].l = 1 * new Date());
                (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
                a.async = 1;
                a.src = g;
                m.parentNode.insertBefore(a, m);
            })(
                window,
                document,
                "script",
                "//www.google-analytics.com/analytics.js",
                "ga"
            );

            ga("create", _gaId, _gaDomain);
            ga("send", "pageview");
        </script>

<!-- disqus 公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'ambertime';
    var disqus_config = function () {
        this.page.url = '/2018/04/android-dai-ma-values-mu-lu-xia-shuo-ming.html';
        this.page.identifier = 'Android 代码 values 目录下说明';
        this.page.title = 'Android 代码 values 目录下说明';
    };

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//ambertime.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<!-- disqus 公共JS代码 end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js"></script>
    </body>
</html>